<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CoreDataStack Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    <meta property="og:site_name" content="Core Data Stack Programming Guide">
<meta property="og:description" content="The BNR Core Data Stack is a small framework, written in Swift, that makes it easy to quickly set up a multi-threading ready Core Data stack.">
<meta property="og:image" content="//www.bignerdranch.com/img/bnr-logo-square.png">
<link rel="shortcut icon" type="image/x-icon" href="//www.bignerdranch.com/favicon.png">

  </head>
  <body>

    <a name="//apple_ref/swift/Class/CoreDataStack" class="dashAnchor"></a>

    <a title="CoreDataStack Class Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          CoreDataStack Docs
        </a>
         (96% documented)
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/bignerdranch/CoreDataStack">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://http%3A%2F%2Fbignerdranch%2Egithub%2Eio%2FCoreDataStack%2Fdocsets%2FCoreDataStack%2Exml">
            <img class="header-icon" src="../img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">CoreDataStack Reference</a>
      <img class="carat" src="../img/carat.png" />
      CoreDataStack Class Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Type Safe Monitors.html">Type Safe Monitors</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/EntityMonitor.html">EntityMonitor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/EntityMonitorDelegate.html">EntityMonitorDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/FetchedResultsController.html">FetchedResultsController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/FetchedResultsControllerDelegate.html">FetchedResultsControllerDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/NSFetchRequestResult.html">NSFetchRequestResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/NSManagedObjectContext.html">NSManagedObjectContext</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/NSPersistentStoreCoordinator.html">NSPersistentStoreCoordinator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Bundle.html">Bundle</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Supporting Structs and Enums.html">Supporting Structs and Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/FetchedResultsObjectChange.html">FetchedResultsObjectChange</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/FetchedResultsSectionChange.html">FetchedResultsSectionChange</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/FetchedResultsSectionInfo.html">FetchedResultsSectionInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/FireFrequency.html">FireFrequency</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Deprecated.html">Deprecated</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CoreDataStack.html">CoreDataStack</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CoreDataStack/Error.html">– Error</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CoreDataStack/CoordinatorResult.html">– CoordinatorResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CoreDataStack/BatchContextResult.html">– BatchContextResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CoreDataStack/SetupResult.html">– SetupResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CoreDataStack/SuccessResult.html">– SuccessResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/CoreDataModelable.html">CoreDataModelable</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            <h1>CoreDataStack</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="kt">CoreDataStack</span></code></pre>

                </div>
              </div>
            <p>Three layer Core Data stack comprised of:</p>

<ul>
<li>A primary background queue context with an <code>NSPersistentStoreCoordinator</code></li>
<li>A main queue context that is a child of the primary queue</li>
<li>A method for spawning many background worker contexts that are children of the main queue context</li>
</ul>

<p>Calling <code>save()</code> on any <code>NSMangedObjectContext</code> belonging to the stack will automatically bubble the changes all the way to the <code>NSPersistentStore</code></p>

<p><a href='#constructing-your-stack' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='constructing-your-stack'>Constructing Your Stack</h1>
<a href='#import-framework' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='import-framework'>Import Framework</h2></p>

<p>via: Carthage</p>

<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">CoreDataStack</span>
</code></pre>

<p>or via CocoaPods</p>

<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">BNRCoreDataStack</span>
</code></pre>

<p><a href='#standard-sqlite-backed' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='standard-sqlite-backed'>Standard SQLite Backed</h2>
<pre class="highlight plaintext"><code>CoreDataStack.constructSQLiteStack(withModelName: <q>TestModel</q>) { result in
switch result {
case .success(let stack):
        self.myCoreDataStack = stack
        print(<q>Success</q>)</p>

<p>case .failure(let error):
        print(error)
}
}
</code></pre>
<a href='#in-memory-only' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='in-memory-only'>In-Memory Only</h2>
<pre class="highlight swift"><code><span class="k">do</span> <span class="p">{</span>
<span class="n">myCoreDataStack</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">CoreDataStack</span><span class="o">.</span><span class="nf">constructInMemoryStack</span><span class="p">(</span>
        <span class="nv">withModelName</span><span class="p">:</span> <span class="s"><q>TestModel</q></span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
<span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#working-with-managed-object-contexts' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='working-with-managed-object-contexts'>Working with Managed Object Contexts</h1>
<a href='#private-persisting-coordinator-connected-context' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='private-persisting-coordinator-connected-context'>Private Persisting/Coordinator Connected Context</h2></p>

<p>This is the root level context with a <code>PrivateQueueConcurrencyType</code>
for asynchronous saving to the <code>NSPersistentStore</code>.
Fetching, Inserting, Deleting or Updating managed objects
should occur on a child of this context rather than directly.</p>

<pre class="highlight swift"><code><span class="n">myCoreDataStack</span><span class="o">.</span><span class="n">privateQueueContext</span>
</code></pre>

<p><a href='#main-queue-ui-layer-context' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='main-queue-ui-layer-context'>Main Queue / UI Layer Context</h2></p>

<p>This is our <code>MainQueueConcurrencyType</code> context
with its parent being the <a href="#persisting_moc">private persisting context</a>.</p>

<p>This context should be used for any main queue or UI related tasks.
Examples include setting up an <code>NSFetchedResultsController</code>,
performing quick fetches, making UI related updates like a bookmark
or favoriting an object.</p>

<p>Performing a save() call on this context will automatically trigger a save on its parent via <code>NSNotification</code>.</p>

<pre class="highlight swift"><code><span class="n">myCoreDataStack</span><span class="o">.</span><span class="n">mainQueueContext</span>
</code></pre>

<p><a href='#creating-a-worker-context' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='creating-a-worker-context'>Creating a Worker Context</h2></p>

<p>Calling <code>newChildContext()</code> will vend us a <code>PrivateQueueConcurrencyType</code> child context of the <a href="#main_moc">main queue context</a>.</p>

<p>Useful for any longer running task, such as inserting or updating data from a web service.</p>

<p>Calling save() on this managed object context will automatically trigger a save
on its parent context via <code>NSNotification</code>.</p>

<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">workerContext</span> <span class="o">=</span> <span class="n">myCoreDataStack</span><span class="o">.</span><span class="nf">newChildContext</span><span class="p">()</span>
<span class="n">workerContext</span><span class="o">.</span><span class="nf">performBlock</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// fetch data from web-service</span>
    <span class="c1">// update local data</span>
    <span class="n">workerContext</span><span class="o">.</span><span class="nf">saveContext</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>

<p><a href='#large-import-operation-context' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='large-import-operation-context'>Large Import Operation Context</h2></p>

<p>In most cases, offloading your longer running work to a <a href="#worker_moc">background worker context</a>
will be sufficient in alleviating performance woes.
If you find yourself inserting or updating thousands of objects,
then perhaps opting for a standalone managed object context
with a discrete persistent store would be the best option,
like so:</p>

<pre class="highlight swift"><code><span class="n">myCoreDataStack</span><span class="o">.</span><span class="nf">newBatchOperationContext</span><span class="p">()</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">batchContext</span><span class="p">):</span>
        <span class="c1">// my big import operation</span>

    <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><a href='#resetting-the-stack' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='resetting-the-stack'>Resetting The Stack</h2></p>

<p>At times it can be necessary to completely reset your Core Data store
and remove the file from disk,
for example, when a user logs out of your application.
An instance of <code>CoreDataStack</code> can be reset by using the function
<code>resetStore(resetCallback: CoreDataStackStoreResetCallback)</code>:</p>

<pre class="highlight swift"><code><span class="n">myCoreDataStack</span><span class="o">.</span><span class="nf">resetStore</span><span class="p">()</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">success</span><span class="p">:</span>
        <span class="c1">// proceed with fresh Core Data Stack</span>

    <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC5ErrorO"></a>
                    <a name="//apple_ref/swift/Enum/Error" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC5ErrorO">Error</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>CoreDataStack specific ErrorTypes</p>

                        <a href="../Classes/CoreDataStack/Error.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">Error</span><span class="p">:</span> <span class="kt">Swift</span><span class="o">.</span><span class="kt">Error</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC19privateQueueContextSo015NSManagedObjectF0Cv"></a>
                    <a name="//apple_ref/swift/Property/privateQueueContext" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC19privateQueueContextSo015NSManagedObjectF0Cv">privateQueueContext</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Primary persisting background managed object context. This is the top level context that possess an
<code>NSPersistentStoreCoordinator</code> and saves changes to disk on a background queue.</p>

<p>Fetching, Inserting, Deleting or Updating managed objects should occur on a child of this context rather than directly.</p>

<p>note: <code>NSBatchUpdateRequest</code> and <code>NSAsynchronousFetchRequest</code> require a context with a persistent store connected directly.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">privateQueueContext</span><span class="p">:</span> <span class="kt">NSManagedObjectContext</span> <span class="o">=</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC16mainQueueContextSo015NSManagedObjectF0Cv"></a>
                    <a name="//apple_ref/swift/Property/mainQueueContext" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC16mainQueueContextSo015NSManagedObjectF0Cv">mainQueueContext</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The main queue context for any work that will be performed on the main queue.
Its parent context is the primary private queue context that persist the data to disk.
Making a <code>save()</code> call on this context will automatically trigger a save on its parent via <code>NSNotification</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">mainQueueContext</span><span class="p">:</span> <span class="kt">NSManagedObjectContext</span> <span class="o">=</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Lifecycle"></a>
                <a name="//apple_ref/swift/Section/Lifecycle" class="dashAnchor"></a>
                <a href="#/Lifecycle">
                  <h3 class="section-name">Lifecycle</h3>
                </a>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC015constructSQLiteC0ySS9modelName_So6BundleC2in10Foundation3URLVSg2ats10DictionaryVys11AnyHashableVypGSg22persistentStoreOptionsSo13DispatchQueueCSg2onyAB11SetupResultOc8callbacktFZ"></a>
                    <a name="//apple_ref/swift/Method/constructSQLiteStack(modelName:in:at:persistentStoreOptions:on:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC015constructSQLiteC0ySS9modelName_So6BundleC2in10Foundation3URLVSg2ats10DictionaryVys11AnyHashableVypGSg22persistentStoreOptionsSo13DispatchQueueCSg2onyAB11SetupResultOc8callbacktFZ">constructSQLiteStack(modelName:in:at:persistentStoreOptions:on:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates a <code>SQLite</code> backed Core Data stack for a given model in the supplied <code>NSBundle</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="nf">constructSQLiteStack</span><span class="p">(</span><span class="nv">modelName</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
                                            <span class="k">in</span> <span class="nv">bundle</span><span class="p">:</span> <span class="kt">Bundle</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="p">,</span>
                                            <span class="n">at</span> <span class="nv">desiredStoreURL</span><span class="p">:</span> <span class="kt">URL</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                            <span class="nv">persistentStoreOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">AnyHashable</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]?</span> <span class="o">=</span> <span class="kt">NSPersistentStoreCoordinator</span><span class="o">.</span><span class="n">stockSQLiteStoreOptions</span><span class="p">,</span>
                                            <span class="n">on</span> <span class="nv">callbackQueue</span><span class="p">:</span> <span class="kt">DispatchQueue</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                            <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt">SetupCallback</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC015constructSQLiteC0ySo20NSManagedObjectModelC5model_10Foundation3URLVSg2ats10DictionaryVys11AnyHashableVypGSg22persistentStoreOptionsSo13DispatchQueueCSg2onyAB11SetupResultOc8callbacktFZ"></a>
                    <a name="//apple_ref/swift/Method/constructSQLiteStack(model:at:persistentStoreOptions:on:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC015constructSQLiteC0ySo20NSManagedObjectModelC5model_10Foundation3URLVSg2ats10DictionaryVys11AnyHashableVypGSg22persistentStoreOptionsSo13DispatchQueueCSg2onyAB11SetupResultOc8callbacktFZ">constructSQLiteStack(model:at:persistentStoreOptions:on:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates a <code>SQLite</code> backed Core Data stack for a given model.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="nf">constructSQLiteStack</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="kt">NSManagedObjectModel</span><span class="p">,</span>
                                            <span class="n">at</span> <span class="nv">desiredStoreURL</span><span class="p">:</span> <span class="kt">URL</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                            <span class="nv">persistentStoreOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">AnyHashable</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]?</span> <span class="o">=</span> <span class="kt">NSPersistentStoreCoordinator</span><span class="o">.</span><span class="n">stockSQLiteStoreOptions</span><span class="p">,</span>
                                            <span class="n">on</span> <span class="nv">callbackQueue</span><span class="p">:</span> <span class="kt">DispatchQueue</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                            <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt">SetupCallback</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC017constructInMemoryC0ABSS9modelName_So6BundleC2intKFZ"></a>
                    <a name="//apple_ref/swift/Method/constructInMemoryStack(modelName:in:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC017constructInMemoryC0ABSS9modelName_So6BundleC2intKFZ">constructInMemoryStack(modelName:in:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates an in-memory Core Data stack for a given model in the supplied <code>NSBundle</code>.</p>

<p>This stack is configured with the same concurrency and persistence model as the <code>SQLite</code> stack, but everything is in-memory.</p>

<div class="aside aside-throws">
    <p class="aside-title">Throws</p>
    <p>Any error produced from <code>NSPersistentStoreCoordinator</code>&lsquo;s <code>addPersistentStoreWithType</code></p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="nf">constructInMemoryStack</span><span class="p">(</span><span class="nv">modelName</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
                                              <span class="k">in</span> <span class="nv">bundle</span><span class="p">:</span> <span class="kt">Bundle</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">CoreDataStack</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC017constructInMemoryC0ABSo20NSManagedObjectModelC5model_tKFZ"></a>
                    <a name="//apple_ref/swift/Method/constructInMemoryStack(model:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC017constructInMemoryC0ABSo20NSManagedObjectModelC5model_tKFZ">constructInMemoryStack(model:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates an in-memory Core Data stack for a given model.</p>

<p>This stack is configured with the same concurrency and persistence model as the <code>SQLite</code> stack, but everything is in-memory.</p>

<div class="aside aside-throws">
    <p class="aside-title">Throws</p>
    <p>Any error produced from <code>NSPersistentStoreCoordinator</code>&lsquo;s <code>addPersistentStoreWithType</code></p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="nf">constructInMemoryStack</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="kt">NSManagedObjectModel</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">CoreDataStack</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Operation%20Result%20Types"></a>
                <a name="//apple_ref/swift/Section/Operation Result Types" class="dashAnchor"></a>
                <a href="#/Operation%20Result%20Types">
                  <h3 class="section-name">Operation Result Types</h3>
                </a>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC17CoordinatorResultO"></a>
                    <a name="//apple_ref/swift/Enum/CoordinatorResult" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC17CoordinatorResultO">CoordinatorResult</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Result containing either an instance of <code>NSPersistentStoreCoordinator</code> or <code>ErrorType</code></p>

                        <a href="../Classes/CoreDataStack/CoordinatorResult.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">CoordinatorResult</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC18BatchContextResultO"></a>
                    <a name="//apple_ref/swift/Enum/BatchContextResult" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC18BatchContextResultO">BatchContextResult</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Result containing either an instance of <code>NSManagedObjectContext</code> or <code>ErrorType</code></p>

                        <a href="../Classes/CoreDataStack/BatchContextResult.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">BatchContextResult</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC11SetupResultO"></a>
                    <a name="//apple_ref/swift/Enum/SetupResult" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC11SetupResultO">SetupResult</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Result containing either an instance of <code><a href="../Classes/CoreDataStack.html">CoreDataStack</a></code> or <code>ErrorType</code></p>

                        <a href="../Classes/CoreDataStack/SetupResult.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">SetupResult</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC13SuccessResultO"></a>
                    <a name="//apple_ref/swift/Enum/SuccessResult" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC13SuccessResultO">SuccessResult</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Result of void representing <code>success</code> or an instance of <code>ErrorType</code></p>

                        <a href="../Classes/CoreDataStack/SuccessResult.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">SuccessResult</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC10resetStoreys10DictionaryVys11AnyHashableVypGSg4with_So13DispatchQueueCSg2onyAB13SuccessResultOc8callbacktF"></a>
                    <a name="//apple_ref/swift/Method/resetStore(with:on:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC10resetStoreys10DictionaryVys11AnyHashableVypGSg4with_So13DispatchQueueCSg2onyAB13SuccessResultOc8callbacktF">resetStore(with:on:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This function resets the <code>NSPersistentStore</code> connected to the <code>NSPersistentStoreCoordinator</code>.
For <code>SQLite</code> based stacks, this function will also remove the <code>SQLite</code> store from disk.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">resetStore</span><span class="p">(</span><span class="n">with</span> <span class="nv">persistentStoreOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">AnyHashable</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?</span> <span class="o">=</span> <span class="kt">NSPersistentStoreCoordinator</span><span class="o">.</span><span class="n">stockSQLiteStoreOptions</span><span class="p">,</span>
                           <span class="n">on</span> <span class="nv">callbackQueue</span><span class="p">:</span> <span class="kt">DispatchQueue</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                           <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt">StoreResetCallback</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC15newChildContextSo015NSManagedObjectF0CSC0ghF15ConcurrencyTypeO4type_SSSg4nametF"></a>
                    <a name="//apple_ref/swift/Method/newChildContext(type:name:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC15newChildContextSo015NSManagedObjectF0CSC0ghF15ConcurrencyTypeO4type_SSSg4nametF">newChildContext(type:name:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Returns a new <code>NSManagedObjectContext</code> as a child of the main queue context.</p>

<p>Calling <code>save()</code> on this managed object context will automatically trigger a save on its parent context via <code>NSNotification</code> observing.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">newChildContext</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="kt">NSManagedObjectContextConcurrencyType</span> <span class="o">=</span> <span class="o">.</span><span class="n">privateQueueConcurrencyType</span><span class="p">,</span>
                                <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="s">"Main Queue Context Child"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">NSManagedObjectContext</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:13CoreDataStackAAC24newBatchOperationContextys10DictionaryVys11AnyHashableVypGSg4with_So13DispatchQueueCSg2onyAB0eG6ResultOc8callbacktF"></a>
                    <a name="//apple_ref/swift/Method/newBatchOperationContext(with:on:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:13CoreDataStackAAC24newBatchOperationContextys10DictionaryVys11AnyHashableVypGSg4with_So13DispatchQueueCSg2onyAB0eG6ResultOc8callbacktF">newBatchOperationContext(with:on:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Creates a new background <code>NSManagedObjectContext</code> connected to
a discrete <code>NSPersistentStoreCoordinator</code> created with the same store used by the stack in construction.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">newBatchOperationContext</span><span class="p">(</span><span class="n">with</span> <span class="nv">persistentStoreOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">AnyHashable</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?</span> <span class="o">=</span> <span class="kt">NSPersistentStoreCoordinator</span><span class="o">.</span><span class="n">stockSQLiteStoreOptions</span><span class="p">,</span>
                                         <span class="n">on</span> <span class="nv">callbackQueue</span><span class="p">:</span> <span class="kt">DispatchQueue</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                         <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt">BatchContextCallback</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>© 2014-2016 <a class="link" href="//www.bignerdranch.com" target="_blank" rel="external">Big Nerd Ranch</a> under <a class="link" href="https://raw.githubusercontent.com/bignerdranch/CoreDataStack/master/LICENSE" target="_blank" rel="external">MIT license</a>.</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
